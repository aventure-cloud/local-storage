/*! webStorage - 0.1.2 - Valerio Barbera */
"use strict";angular.module("webStorage",[]).provider("$localStorage",function(){var $log=angular.injector(["ng"]).get("$log"),prefix="",_setPrefix=function(p){return"string"==typeof p?(prefix=p,console.log("localStorage namespace = "+prefix),this):!1},_composeKey=function(key){return prefix+key},_getItem=function(key){try{var value=JSON.parse(window.localStorage.getItem(_composeKey(key)));return null===value?!1:value}catch(e){return null===window.localStorage.getItem(_composeKey(key))?!1:window.localStorage.getItem(_composeKey(key))}},_set=function(key,obj){return"object"==typeof obj||Array.isArray(obj)?window.localStorage.setItem(_composeKey(key),JSON.stringify(obj)):window.localStorage.setItem(_composeKey(key),obj)},_getAll=function(){if(""==prefix)return window.localStorage;var result=[];for(key in window.localStorage)-1!=key.indexOf(prefix)&&(result[key]=window.localStorage[key]);return result},_getKeys=function(){var result=[],key="";for(key in window.localStorage)""==prefix?result.push(key):-1!=key.indexOf(prefix)&&result.push(key);return $log.debug(result),result},_remove=function(key){if(Array.isArray(key)){$log.debug("Deleting array of Keys");for(var i=0;i<key.length;i++)"string"==typeof key[i]?window.localStorage.removeItem(key[i]):$log.warn("Found a no string element in array")}else"string"==typeof key?($log.debug("Deleting single Key"),window.localStorage.removeItem(_composeKey(key))):$log.error("Local storage KEY isn't valid");return this},_clear=function(){return $log.warn("Called Clear()"),this.remove(this.getKeys()),this};return{setPrefix:_setPrefix,get:_getItem,$get:function(){return{set:_set,get:_getItem,getAll:_getAll,getKeys:_getKeys,remove:_remove,clear:_clear}}}});